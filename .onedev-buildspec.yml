version: 29
jobs:
- name: Publish Image
  steps:
  - !BuildImageWithKanikoStep
    name: Build and Publish
    destinations: ops/kube-secret-sync:latest
    moreOptions: --dockerfile ./Dockerfile
    condition: ALL_PREVIOUS_STEPS_WERE_SUCCESSFUL
  retryCondition: never
  maxRetries: 3
  retryDelay: 30
  timeout: 3600
